# Asset Formats

## Archive Format

### PK3 (ZIP Archives)
FAKK2 uses the same PK3 system as Quake III Arena. PK3 files are standard ZIP archives renamed to `.pk3`. They are stored in the `fakk/` game directory and searched in reverse numerical order (higher numbers override lower).

**Shipped archives:**
| File | Size | Contents |
|------|------|----------|
| pak0.pk3 | 340 MB | Primary game assets (models, textures, maps, sounds) |
| pak1.pk3 | 37 MB | Additional assets |
| pak2.pk3 | 10 KB | Small patch data |

## Model Formats

### TIKI (.tik)
Text-based model definition files. The central content format for UberTools.

**Structure:**
```
TIKI
setup
{
    scale <float>
    path <relative_path>
    skelmodel <skeleton_file.skl>
    surface <name> shader <shader_name> [flags]
    ...
}
init
{
    server
    {
        classname <EntityClass>
        <key> <value>
        ...
    }
    client
    {
        <commands>
    }
}
animations
{
    <anim_name> <anim_file.anm> [weight <float>] [blendtime <float>]
    {
        server { <frame> <command> [args] }
        client { <frame> <command> [args] }
    }
    ...
}
```

### CIK (.cik)
Binary compiled/cached TIKI data. Generated from .tik files for faster loading.

### SKL (.skl)
Skeleton definition file. Binary format containing:
- Bone hierarchy (parent-child relationships)
- Bind pose transforms
- Bone names

### TAN (.tan)
Model geometry data. Binary format containing:
- Vertex positions (per-frame or skeletal binding)
- Texture coordinates
- Triangle indices
- Surface grouping

### ANM (.anm)
Animation sequence data. Binary format containing:
- Per-bone transforms per frame
- Frame count and framerate
- Bone channel assignments

## Texture Formats

### FTX (.ftx)
FAKK2-specific texture format. Converted from source textures via `ftxconvert` tool. Likely a simple header + raw RGBA pixel data with mipmaps.

### TGA (.tga)
Standard Targa image format. Used as source textures and for some in-game assets.

## Map Format

### BSP (.bsp)
Binary Space Partition map format. FAKK2 variant:

**Header:**
```c
#define BSP_HEADER  "FAKK"  // 4-byte magic
#define BSP_VERSION 12       // version number
```

Based on the Q3 BSP format with Ritual's extensions. Key differences from stock Q3 BSP:
- Additional surface types for UberTools materials
- Terrain surface support
- Sky portal data
- Extended entity definitions for Morpheus scripting

**Lumps** (data sections within BSP):
Standard Q3 lumps plus Ritual additions for terrain, portals, etc.

## Sound Formats

### WAV (.wav)
Standard PCM wave audio. Used for sound effects.

### OGG / MP3
Music files (streamed via Miles Sound System). The recomp will need a decoder (SDL2_mixer, stb_vorbis, or dr_mp3).

## Script/Config Formats

### CFG (.cfg)
Console command script files. Executed line-by-line through the command system.

**Key config files:**
- `default.cfg` -- Default key bindings and settings
- `autoexec.cfg` -- Auto-executed on startup (demo sequences, map loading)
- `config.cfg` -- User-modified settings (generated by game)

### Shader (.shader)
Text-based shader definitions. Extended from Q3's shader format with UberTools additions (lens flares, enhanced blending, sky portals).

```
textures/environment/sky_intro
{
    qer_editorimage textures/environment/sky_intro.tga
    surfaceparm sky
    surfaceparm noimpact
    surfaceparm nolightmap
    q3map_sun 1 0.9 0.8 100 60 80
    skyparms - 512 -
    {
        map textures/environment/sky_intro.tga
    }
}
```

### Statemap (.st)
NPC behavior state machine definitions. Text-based files that define AI behavior states and transitions.

### EFT (.eft)
Effect definition files for the Ghost particle system. Define emitter parameters, particle behavior, and visual properties.

## Localization

### String Packs
FAKK2 supports multiple languages:
- English, French, German, Italian, Spanish, Russian

String data is stored within PK3 archives and loaded based on the configured language.
